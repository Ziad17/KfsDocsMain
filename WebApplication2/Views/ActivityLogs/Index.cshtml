@model WebApplication2.Models.ViewModels.LogsViewModel

@{ ViewBag.Title = "سجل العمليات";
    //  string title = "العمليات التي قمت بها بصفة " + "<a href='~/Roles'>" + Model.MyRef.Role.ArabicName + "</a>" + " لدى " + "<a href='~/Institutions/InstitutionProfile/" + Model.MyRef.InstitutionID + "'>" + Model.MyRef.Institution.ArabicName + "</a>";
    <br />  
 string title = "العمليات التي قمت بها بصفة " + Model.MyRef.Role.ArabicName + " لدى " + Model.MyRef.Institution.ArabicName; }

 <h2 style="font-weight:600" > <i style="font-size:50px;margin-top:10px" class="fas fa-chalkboard-teacher"></i> @title </h2>

<br />
<br />
<div class="row">
    <div class="col-md-12">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item headtaps" role="presentation">
                <a class="nav-link active ataps" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true"> الأشخاص  </a>
            </li>
            <li class="nav-item headtaps" role="presentation">
                <a class="nav-link ataps" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">المؤسسات</a>
            </li>
            <li class="nav-item headtaps" role="presentation">
                <a class="nav-link ataps" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false"> الملفات </a>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade active taps in" id="home" role="tabpanel" aria-labelledby="home-tab">
                @if (Model.PersonActionLogs.Count > 0)
                {

    <div class="table-responsive ">
        <table border="0" class="table table-hover">
            <tr>
                <th>
                    إسم العملية
                </th>
                <th>
                    الشخص
                </th>
                <th>
                    بتاريخ
                </th>

            </tr>

            @foreach (var item in Model.PersonActionLogs)
            {
<tr>
    <td>
        @item.PersonPermission.ArabicName
    </td>

    <td>
        @Html.ActionLink(item.Employee.Name, "PersonProfile", "Employees", new { id = item.AffectedEmployeeID }, null)
    </td>
    <td>
        @item.ActionDate
    </td>
</tr>
}


        </table>
    </div> }
else
{
<div class="danger taps" style="background-color: #dc3545;color :#fff">
    <i style="font-size:18px" class="far fa-times-circle"> &nbsp; &nbsp;</i><h4 style="display:inline-block;font-weight:600;padding-right:5px">لا يوجد أشخاص  </h4>
</div>}
            </div>
            <div class="tab-pane fade taps" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                @if (Model.InstitutionActionLogs.Count > 0)
                {
    <div class="table-responsive">
        <table border="0" class="table table-hover">
            <tr>
                <th>
                    إسم العملية
                </th>
                <th>
                    المؤسسة
                </th>
                <th>
                    بتاريخ
                </th>

            </tr>

            @foreach (var item in Model.InstitutionActionLogs)
            {
<tr>
    <td>
        @item.InstitutionPermission.ArabicName
    </td>

    <td>

        @Html.ActionLink(item.Institution.ArabicName, "InstitutionProfile", "Institutions", new { id = item.InstitutionID }, null)

    </td>
    <td>
        @item.ActionDate
    </td>
</tr>}


        </table>
    </div> }
else
{
<div class="danger taps" style="background-color: #dc3545;color :#fff">
    <i style="font-size:18px" class="far fa-times-circle"> &nbsp; &nbsp;</i><h4 style="display:inline-block;font-weight:600;padding-right:5px"> لا يوجد أي عمليات</h4>
</div>}
            </div>
            <div class="tab-pane fade taps" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                @if (Model.FileActionLogs.Count > 0)
                {

    <div class="table-responsive">
        <table border="0" class="table table-hover">
            <tr>
                <th>
                    إسم العملية
                </th>
                <th>
                    الملف
                </th>
                <th>
                    بتاريخ
                </th>

            </tr>

            @foreach (var item in Model.FileActionLogs)
            {
<tr>
    <td>
        @item.FilePermission.ArabicName
    </td>

    <td>
        @Html.ActionLink(item.File.Name, "View", "Files", new { id = item.FileID }, null)
    </td>
    <td>
        @item.ActionDate
    </td>
</tr>}


        </table>
    </div> }
else
{
<div class="danger taps" style="background-color: #dc3545;color :#fff">
    <i style="font-size:18px" class="far fa-times-circle"> &nbsp; &nbsp;</i><h4 style="display:inline-block;font-weight:600;padding-right:5px"> لا يوجد أي عمليات</h4>
</div>}
            </div>
        </div>
    </div>
</div>
